<!DOCTYPE html>
<html>
<head>
    <title>Teste de Toque Puro (Vanilla JS)</title>
    <style>
        body {
            /* ESSENCIAL: BLOQUEIO GLOBAL DE ROLAGEM */
            touch-action: none; 
            margin: 0;
            overflow: hidden; 
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #0a0014;
        }
        #gameCanvas {
            border: 2px solid #fff;
            background-color: #000;
        }
    </style>
</head>
<body>

    <canvas id="gameCanvas" width="800" height="450"></canvas>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        let rocketY = canvas.height / 2;
        let isTouching = false; // Estado do toque
        let gravity = 0.5;
        let yVelocity = 0;
        const thrust = -5; // Impulso para cima

        // --- 1. FUNÇÃO DE DESENHO ---
        function drawRocket() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Foguete (Triângulo Simples)
            ctx.fillStyle = 'red';
            ctx.beginPath();
            ctx.moveTo(canvas.width / 4, rocketY - 15);
            ctx.lineTo(canvas.width / 4 - 10, rocketY + 15);
            ctx.lineTo(canvas.width / 4 + 10, rocketY + 15);
            ctx.closePath();
            ctx.fill();

            // Chamas de Propulsão (se estiver tocando)
            if (isTouching) {
                ctx.fillStyle = 'orange';
                ctx.fillRect(canvas.width / 4 - 5, rocketY + 15, 10, 10);
            }
        }

        // --- 2. LOOP PRINCIPAL DO JOGO ---
        function gameLoop() {
            // Aplica Impulso se tocando
            if (isTouching) {
                yVelocity += thrust;
            }

            // Aplica Gravidade
            yVelocity += gravity;

            // Atualiza Posição
            rocketY += yVelocity;

            // Colisão com o chão/teto (Limita)
            if (rocketY > canvas.height - 15) {
                rocketY = canvas.height - 15;
                yVelocity = 0;
            } else if (rocketY < 15) {
                rocketY = 15;
                yVelocity = 0;
            }

            drawRocket();
            requestAnimationFrame(gameLoop); // Loop nativo
        }

        // --- 3. CONTROLE DE TOQUE PURO ---

        // Função para impedir o comportamento padrão e registrar o toque
        function handleTouch(event) {
            // ESTE É O BLOQUEIO CRÍTICO. 
            // O navegador não pode rolar ou fazer zoom.
            event.preventDefault(); 
            
            // Verifica se o toque começou (touchstart) ou se o mouse está pressionado
            if (event.type === 'touchstart' || event.type === 'mousedown') {
                isTouching = true;
            } 
            // Verifica se o toque terminou (touchend) ou se o mouse foi solto
            else if (event.type === 'touchend' || event.type === 'mouseup') {
                isTouching = false;
            }
        }

        // Adiciona listeners de TOQUE (para celular)
        canvas.addEventListener('touchstart', handleTouch, { passive: false });
        canvas.addEventListener('touchend', handleTouch, { passive: false });

        // Adiciona listeners de MOUSE (para desktop)
        canvas.addEventListener('mousedown', handleTouch, false);
        canvas.addEventListener('mouseup', handleTouch, false);
        
        // Inicia o jogo
        requestAnimationFrame(gameLoop);
    </script>
</body>
</html>
